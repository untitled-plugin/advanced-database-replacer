(this["webpackJsonpadvanced-database-replacer"]=this["webpackJsonpadvanced-database-replacer"]||[]).push([[7],{370:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return F}));var a=n(368),r=n(57),c=function(e,t){var n,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return!e.conditions||(n=null!==l&&null!==c?e.conditions.map((function(e){var n=Object(r.a)(e,2),i=n[0],s=n[1],o=String(i).endsWith("!"),u=o?String(i).slice(0,-1):String(i),d=t.getFieldValue(c)[l];return d&&d[u]||(d=Object(a.a)({},u,t.getFieldValue(u))),o?(d[u]||null)!==s:(d[u]||null)===s})):e.conditions.map((function(e){var n=Object(r.a)(e,2),a=n[0],c=n[1],l=String(a).endsWith("!"),i=l?String(a).slice(0,-1):String(a),s=t.getFieldValue(i)||null;return l?s!==c:s===c}))).filter((function(e){return e})).length===n.length},l=n(371),i=n.n(l),s=n(372),o=n(373),u=n(369),d=n.n(u),j=n(375),b=n.n(j),p=window.adr.ajax,f=p.url,O=p.nonce,m=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){var c,l,o,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=u.length>3&&void 0!==u[3]?u[3]:null,l=u.length>4&&void 0!==u[4]?u[4]:null,n.valuesCallback){e.next=4;break}return e.abrupt("return",[]);case 4:return o={},n.valuesCallbackParams&&n.valuesCallbackParams.forEach((function(e){var t;null!==l&&null!==c&&(t=r.getFieldValue(c)[l][e]),o=Object.assign(o,Object(a.a)({},e,String(t||r.getFieldValue(e))))})),e.abrupt("return",d.a.post(f,b.a.stringify(Object(s.a)(Object(s.a)({action:n.valuesCallback,nonce:O},o),t)),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.data.data||[]})));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),x=window.adr.ajax,h=x.url,v=x.nonce,g=x.executeAction,y=function(e,t){return d.a.post(h,b.a.stringify(Object(s.a)({action:g,nonce:v,dry:e},t)),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.data.data||[]}))},w=window.adr.ajax,C=w.url,k=w.nonce,S=w.historyAction,F=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.get(C,{params:{nonce:k,action:S,page:t}}).then((function(e){return e.data.data||[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},734:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(371),c=n.n(r),l=n(368),i=n(372),s=n(373),o=n(57),u=n(0),d=n(732),j=n(355),b=n(358),p=n(728),f=n(729),O=n(75),m=n(743),x=n(363),h=n(361),v=n(744),g=n(36),y=n(370),w=n(422),C=n(351),k=function(){return Object(a.jsx)(C.a,{count:"PRO",style:{backgroundColor:"orange",marginLeft:10}})},S=function(e){var t=e.field,n=e.listField,r=e.parent;return Object(a.jsx)(j.a.Item,{name:n&&r?[n.name,t.name]:t.name,label:t.label,rules:[{required:!0}],fieldKey:n&&r?[n.fieldKey,t.name]:void 0,labelCol:{xl:{span:4},lg:{span:6},md:{span:8}},wrapperCol:{xl:{span:20},lg:{span:18},md:{span:16}},initialValue:t.default?t.default:void 0,children:Object(a.jsx)(w.a,{mode:t.multiple?"multiple":void 0,placeholder:Object(g.a)("form.select_placeholder"),showSearch:!0,filterOption:function(e,t){return(t&&t.children.props.children[0]||"").toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){var n=e&&e.children.props.children[0]||"",a=t&&t.children.props.children[0]||"";return n.toLowerCase().localeCompare(a.toLowerCase())},children:Object.values(t.values||{}).map((function(e){return Object(a.jsx)(w.a.Option,{value:e.value,disabled:!Object(g.c)()&&e.isPro,children:Object(a.jsxs)("div",{children:[e.label,!Object(g.c)()&&e.isPro&&Object(a.jsx)(k,{})]})},e.value)}))})})};S.defaultProps={listField:null,parent:null};var F=S,_=n(735),I=n(738),P=function(e){var t=e.field,n=e.listField,r=e.parent;return Object(a.jsx)(j.a.Item,{name:n&&r?[n.name,t.name]:t.name,label:t.label,rules:[{required:!0}],fieldKey:n&&r?[n.fieldKey,t.name]:void 0,labelCol:{xl:{span:4},lg:{span:6},md:{span:8}},wrapperCol:{xl:{span:20},lg:{span:18},md:{span:16}},children:"text"===t.inputType?Object(a.jsx)(_.a,{}):Object(a.jsx)(I.a,{style:{width:"100%"}})})};P.defaultProps={listField:null,parent:null};var T=P,q=n(739),V=n(740),L=n(741),B=n(353),K=n(458),z=n.n(K),A=function(e){var t=e.field,n=e.listField,r=e.parent,c=e.form,l=Object(u.useState)(!1),i=Object(o.a)(l,2),s=i[0],d=i[1],b=Object(u.useState)([]),p=Object(o.a)(b,2),f=p[0],O=p[1];return Object(a.jsx)(j.a.Item,{name:n&&r?[n.name,t.name]:t.name,label:t.label,rules:[{required:!0}],fieldKey:n&&r?[n.fieldKey,t.name]:void 0,labelCol:{xl:{span:4},lg:{span:6},md:{span:8}},wrapperCol:{xl:{span:20},lg:{span:18},md:{span:16}},children:Object(a.jsx)(w.a,{showSearch:!0,mode:t.multiple?"multiple":void 0,notFoundContent:s?Object(a.jsx)(B.a,{size:"small"}):null,filterOption:!1,labelInValue:!0,onSearch:z()((function(e){O([]),d(!0),Object(y.c)({value:e},t,c,null===r||void 0===r?void 0:r.name,null===n||void 0===n?void 0:n.name).then((function(e){return O(e)})).finally((function(){return d(!1)}))}),300),placeholder:Object(g.a)("form.async_select_placeholder"),children:f.map((function(e){return Object(a.jsx)(w.a.Option,{value:e.value,children:e.label},e.value)}))})})};A.defaultProps={listField:null,parent:null};var D=A,J=function(e){var t=e.field,n=e.form;return Object(a.jsx)(j.a.List,{name:t.name,children:function(e,r){var c=r.add,l=r.remove;return Object(a.jsxs)(a.Fragment,{children:[e.map((function(e){return Object(a.jsxs)(j.a.Item,{style:{padding:10,border:"2px dashed green",background:"#e6fff5",marginBottom:15,borderRadius:5},shouldUpdate:!0,children:[(t.subFields||[]).map((function(r){return Object(y.a)(r,n,t.name,e.name)?Object(a.jsxs)("div",{children:["select"===r.type&&Object(a.jsx)(F,{field:r,parent:t,listField:e}),"async-select"===r.type&&Object(a.jsx)(D,{field:r,form:n,parent:t,listField:e}),"input"===r.type&&Object(a.jsx)(T,{field:r,parent:t,listField:e})]},r.name):null})),Object(a.jsx)(q.a,{title:Object(g.a)("form.remove_group_confirm"),onConfirm:function(){return l(e.name)},okText:Object(g.a)("form.remove_group_confirm_yes"),okButtonProps:{danger:!0},cancelText:Object(g.a)("form.remove_group_confirm_no"),children:Object(a.jsx)(O.a,{type:"default",danger:!0,block:!0,icon:Object(a.jsx)(V.a,{}),children:Object(g.a)("form.remove_group")})})]},e.name)})),Object(a.jsx)(j.a.Item,{children:Object(a.jsxs)(O.a,{type:"primary",onClick:function(){return c()},disabled:!Object(g.c)()&&e.length>0,block:!0,icon:Object(a.jsx)(L.a,{}),children:[Object(g.a)("form.new_group"),!Object(g.c)()&&e.length>0&&Object(a.jsx)(k,{})]})})]})}})},M=n(742),R=n(357),U=n(359),W=n(737),E=n(459),H=n.n(E),G=n(736),N=function(e){var t=e.fields,n=Object(u.useState)(!1),r=Object(o.a)(n,2),c=r[0],l=r[1],i=Object(u.useState)(!1),s=Object(o.a)(i,2),d=s[0],j=s[1],b=Object(u.useState)(!1),p=Object(o.a)(b,2),f=p[0],m=p[1],x=Object(u.useState)(!0),h=Object(o.a)(x,2),v=h[0],w=h[1],C=Object(u.useState)(),k=Object(o.a)(C,2),S=k[0],F=k[1],_=function(e){l(!0),m(!0),w(!1),Object(y.b)(e,t).then((function(e){F(e)})).catch((function(e){F(e)})).finally((function(){m(!1)}))},I=function(){return R.a.confirm({visible:d,title:Object(g.a)("replace.confirm.title"),icon:Object(a.jsx)(M.a,{}),content:Object(g.a)("replace.confirm.message"),okText:Object(g.a)("replace.confirm.yes"),okButtonProps:{danger:!0},onOk:function(){j(!1),_(!1)},cancelText:Object(g.a)("replace.confirm.no")})};return Object(a.jsxs)(U.b,{direction:"vertical",style:{marginBottom:20,width:"100%"},children:[Object(g.a)("replace.message"),Object(a.jsx)(H.a,{src:t,name:null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,collapsed:1}),Object(a.jsxs)(U.b,{direction:"horizontal",style:{width:"100%",display:"flex",justifyContent:"center"},children:[Object(a.jsx)(O.a,{type:"dashed",onClick:function(){return _(!0)},children:Object(g.a)("replace.run_dry")}),Object(a.jsx)(O.a,{type:"primary",danger:!0,onClick:I,children:Object(g.a)("replace.run")})]}),Object(a.jsxs)(R.a,{visible:c,footer:!1,onCancel:function(){return l(!1)},children:[f&&Object(a.jsx)(B.a,{size:"large",style:{display:"flex",justifyContent:"center",minHeight:"350px",alignItems:"center"}}),!f&&Object(a.jsx)(W.a,{status:"success"===(null===S||void 0===S?void 0:S.status)?"success":"error",title:"success"===(null===S||void 0===S?void 0:S.status)?Object(g.a)("replace.modal.success"):Object(g.a)("replace.modal.error"),subTitle:null===S||void 0===S?void 0:S.message,extra:[Object(a.jsxs)(a.Fragment,{children:[(null===S||void 0===S?void 0:S.query)&&Object(a.jsx)(O.a,{type:"default",onClick:function(){return w(!v)},children:Object(g.a)("replace.toggle")},"console"),(null===S||void 0===S?void 0:S.status)&&(null===S||void 0===S?void 0:S.isDry)?Object(a.jsx)(O.a,{type:"primary",danger:!0,onClick:I,children:Object(g.a)("replace.run")},"console"):null]})]}),v&&Object(a.jsx)(G.a,{language:"sql",wrapLines:!0,children:(null===S||void 0===S?void 0:S.query)||""})]})]})},Q=n(130);t.default=function(e){var t=e.form,n=e.tab,r=e.setTab,w=Object(u.useState)({}),C=Object(o.a)(w,2),k=C[0],S=C[1],_=Object(g.b)(n),I=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validateFields().then((function(){S(Object(i.a)(Object(i.a)({},k),Object(l.a)({},String(null===_||void 0===_?void 0:_.name),t.getFieldsValue()))),r(n+1)})).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(d.a,{current:n,style:{marginBottom:30},children:[Object(a.jsx)(d.a.Step,{title:Object(g.a)("form.steps.target"),icon:Object(a.jsx)(m.a,{})}),Object(a.jsx)(d.a.Step,{title:Object(g.a)("form.steps.conditions"),icon:Object(a.jsx)(x.a,{})}),Object(a.jsx)(d.a.Step,{title:Object(g.a)("form.steps.update"),icon:Object(a.jsx)(h.a,{})}),Object(a.jsx)(d.a.Step,{title:Object(g.a)("form.steps.replace"),icon:Object(a.jsx)(v.a,{})})]}),Object(a.jsxs)(j.a,{form:t,name:"replacer",requiredMark:"optional",validateMessages:{required:String(Object(g.a)("form.valid"))},children:[_&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{message:_.label,showIcon:!0,style:{marginBottom:30}}),(_.subFields||[]).map((function(e){return Object(a.jsx)(j.a.Item,{noStyle:!0,shouldUpdate:!0,style:{width:"100%"},children:function(){return Object(y.a)(e,t)&&Object(a.jsxs)(a.Fragment,{children:["condition-repeater"===e.type&&Object(a.jsx)(J,{field:e,form:t}),"select"===e.type&&Object(a.jsx)(F,{field:e}),"async-select"===e.type&&Object(a.jsx)(D,{field:e,form:t}),"input"===e.type&&Object(a.jsx)(T,{field:e})]})}},e.name)}))]}),3===n&&Object(a.jsx)(N,{fields:k}),Object(a.jsx)(j.a.Item,{children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(f.a,{span:12,children:n>0&&Object(a.jsx)(O.a,{onClick:function(){return r(n-1)},children:Object(g.a)("form.prev_step")})}),Object(a.jsxs)(f.a,{span:12,style:{display:"flex",justifyContent:"flex-end"},children:[n<3&&Object(a.jsx)(O.a,{type:"primary",onClick:I,children:Object(g.a)("form.next_step")}),3===n&&Object(a.jsxs)(O.a,{type:"primary",disabled:!0,children:[Object(g.a)("form.save_template"),Object(a.jsx)(Q.a,{})]})]})]})})]})]})}}}]);